//////////////////////////////////////////////////////////////////////////////////////////
//                                                                                      //
//                   (C) Hestia 2021 - PBL & TNO                                        //
//                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////

container CPT
{
	parameter<bool> use := false;

	container Investeringsbedragen
	{
		attribute<Eur> Ki_LO30  (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/Ki30_LO, GeschiktObject/xProduct/GeschiktObject_rel); 
		attribute<Eur> Ki_LO20  (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/Ki20_LO, GeschiktObject/xProduct/GeschiktObject_rel);
		attribute<Eur> Ki_LO15  (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/Ki15_LO, GeschiktObject/xProduct/GeschiktObject_rel);
		attribute<Eur> Ki_LTAS  (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/Ki_LTAS;
		attribute<Eur> Ki_Gnet  (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/Ki_Gnet;
		attribute<Eur> Ki_gv    (GeschiktObject) := BTW_Factor_gv * Geschikteoptieberekening/Ki_gv;
		attribute<Eur> Ki_DK    (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/Ki_DK;
		attribute<Eur> Ki_KK    (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/Ki_KK;
		attribute<Eur> Ki_VT    (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/Ki_VT;
	}

	container Overheadkosten
	{
		attribute<eur_yr> Kj_OH        (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/jaarlijks/KJ_OH_LO, GeschiktObject/xProduct/GeschiktObject_rel);
		attribute<eur_yr> Kj_ADM       (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/jaarlijks/Kj_Adm_LO, GeschiktObject/xProduct/GeschiktObject_rel);
		attribute<eur_yr> Kj_vastrecht (GeschiktObject) := BTW_Factor * SplitIncentiveVastrecht * Geschikteoptieberekening/jaarlijks/Kj_Vastrecht_g;
	}

	container Subsidies
	{
		attribute<Eur> Oi30_LO  (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/Oi30_LO, GeschiktObject/xProduct/GeschiktObject_rel);
		attribute<Eur> Oi20_LO  (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/Oi20_LO, GeschiktObject/xProduct/GeschiktObject_rel);
		attribute<Eur> Oi15_LO  (GeschiktObject) := BTW_Factor * sum(Geschikteoptieberekening/Oi15_LO, GeschiktObject/xProduct/GeschiktObject_rel);
		attribute<Eur> OiDK_LO  (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/OiDK_LO;
		attribute<Eur> Oi_GV    (GeschiktObject) := BTW_Factor_gv * Geschikteoptieberekening/Oi_GV;
		attribute<Eur> Oi_Gnet  (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/Oi_Gnet;
		attribute<Eur> Oi_LTAS  (GeschiktObject) := BTW_Factor * Geschikteoptieberekening/Oi_LTAS;
	}

	container Energieverbruik
	{
		attribute<GJ_yr> Metervraag_elek     (GeschiktObject) := GeschikteOptieBerekening/Func2Meter/result/E;
		attribute<GJ_yr> Metervraag_gas      (GeschiktObject) := GeschikteOptieBerekening/Func2Meter/result/gas;
		attribute<GJ_yr> Metervraag_H2       (GeschiktObject) := GeschikteOptieBerekening/Func2Meter/result/H2;
		attribute<GJ_yr> Metervraag_Biomassa (GeschiktObject) := GeschikteOptieBerekening/Func2Meter/result/Biomassa;
		attribute<GJ_yr> Metervraag_Olie     (GeschiktObject) := GeschikteOptieBerekening/Func2Meter/result/Olie;
		attribute<GJ_yr> Metervraag_Pellets  (GeschiktObject) := GeschikteOptieBerekening/Func2Meter/result/Pellets;
	}

	unit<uint32> Elek_prijzen: Storagename = "%projdir%/data/price_paths.csv", StorageType = "gdal2.vect", StorageReadOnly = "True"
	{
	attribute<string> label             := string(2000 + uint32(field_1));
	attribute<bool>   is_relevant       := label[yr_uint16] < zichtjaar_jaar ? False : label[yr_uint16] > zichtjaar_jaar + 29[yr_uint16]  ? False : True;
	attribute<eur_yr> kosten_prijspad_1 := not(is_relevant) ? 0[eur_yr] : Energieverbruik/Metervraag_elek * prijspad1[eur_GJ];
	}
	parameter<ratio> Discontovoet := 0.06;
	
	unit<uint32> Elekprijs_Geschiktobject:= combine(Elek_prijzen, GeschiktObject);

	attribute<Eur_yr> CPT_score (GeschiktObject) := const(0.0[eur_yr],GeschiktObject);
}